# Logging and Observability Implementation Plan

**Date**: 2025-11-03
**Status**: âœ… Ready for Implementation
**Estimated Timeline**: 7-11 days

## Quick Reference

### Phase 1: File-Based Logging (START HERE) - 1-2 days
- Add structured file logging with rotation
- Platform-specific paths via Tauri API
- Privacy filtering (redact API keys, transcripts)
- JSON for production, pretty for development

### Dependencies to Add
```toml
tracing-subscriber = { version = "0.3.18", features = ["env-filter", "json", "registry"] }
tracing-appender = "0.2.3"
```

### Log Locations
- **macOS**: `~/Library/Application Support/dev.fermatsolutions.causal/logs/`
- **Windows**: `%APPDATA%\dev.fermatsolutions.causal\logs\`

## Full Plan Details

See the comprehensive plan generated by the Planning Agent which includes:

1. **Architecture Design**
   - Hybrid tracing + OpenTelemetry approach
   - Multi-layer subscriber (console + file + optional OTLP)
   - Privacy-first design with configurable redaction

2. **Implementation Phases**
   - Phase 1: File-based structured logging (1-2 days)
   - Phase 2: OpenTelemetry integration (2-3 days)
   - Phase 3: Metrics and management UI (2-3 days)
   - Phase 4: Frontend integration (1 day)

3. **Key Features**
   - Structured JSON logs for production
   - Daily log rotation with 30-day retention
   - Privacy filtering (API keys, transcripts, PII)
   - Distributed tracing with spans
   - Application metrics
   - User controls (view/export/clear logs)

4. **Performance Impact**
   - CPU: +2-4% (negligible)
   - Memory: +20-40 MB
   - Disk: ~100-500 MB/month

5. **Privacy & Compliance**
   - Local-first (no network by default)
   - Redact sensitive data (API keys, transcripts)
   - User control over logging levels
   - GDPR compliant

## Migration Path

1. Add logging module (no breaking changes)
2. Replace initialization in lib.rs
3. Test in development
4. Add instrumentation incrementally
5. Roll out to production

## Next Steps

Starting Phase 1 implementation now...
